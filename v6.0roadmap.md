
# Phase 1: The Variable Parser (Semantic State)
Goal: Enable $:, $$:, and $CONST: syntax detection.

Update processInputWithCache loop:
Modify the main parsing loop in glupec.cpp to detect the colon operator : after the dollar signs.
Logic:
$: -> Ephemeral Variable (Flag: isVariable, isCached=false).
$$: -> Persistent Variable (Flag: isVariable, isCached=true).
$CONST: -> Constant (Flag: isConstant).
Identifier & Assignment Parsing:
Implement parsing for the variable name and the arrow ->.
Current: $$ name { ... }
New: $: name -> value_or_instruction
Value Type Detection:
Detect if the right-hand side is:
Literal String: Starts/ends with quotes ("value").
Literal Number: Is numeric.
Instruction: Plain text (treated as a prompt).
Container: Starts with $ or $$.

# Phase 2: The Symbol Table & Caching
Goal: Store and retrieve the values of these new primitives.

Extend LOCK_DATA:

- Add a "variables" section to .glupe.lock to store persistent variables ($$:) and constants.
- Ephemeral variables ($:) should be stored in an in-memory map (std::map<string, string>  symbol_table) during compilation but not written to disk.

Resolution Logic:

- Literals: Store the value directly.
- Instructions: Send to LLM, store the result.
- Constants: Store once. Throw error if re-defined.

# Phase 3: Context Injection (Functions)
Goal: Support $$ name(param1, param2) { ... }.

Signature Parsing:
- Update the identifier parser to stop at ( and capture the content between ( and ).
- Store params as a vector of strings.

Prompt Engineering Update:

- Modify the prompt construction in processInputWithCache.
- If params exist, inject a specific instruction to the LLM:

"Generate a function signature accepting [param1, param2]. Ensure the implementation uses these parameters."

# Phase 4: Prompt Algebra (Composition)
Goal: Allow containers to reference variables.

Dependency Resolution:

Before sending a container prompt to the AI, scan it for references to known variables (from Phase 2).
Example: If $: x -> 10 is defined, and container A says print x, inject Context: x = 10 into A's prompt.

Inheritance Merging:

Ensure -> parent logic works for variables too (e.g., $: x -> parent_var).

# Implementation Checklist
[ ] Step 1: Create a struct SemanticNode in glupec.cpp to handle the new types (Variable, Constant, Container).
[ ] Step 2: Refactor the big while loop in processInputWithCache to switch on $ vs $$ vs $: vs $$: vs $CONST:.
[ ] Step 3: Implement resolveVariable(node) function to handle LLM generation or literal extraction for variables.
[ ] Step 4: Update callAI prompts to include the "Context Injection" data.
